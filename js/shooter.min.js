var version='1.1.1';$('#version').text(version);var Base64={_0:'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',encode(input){'use strict';var output='';var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;input=Base64._1(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else if(isNaN(chr3)){enc4=64}output=output+this._0.charAt(enc1)+this._0.charAt(enc2)+this._0.charAt(enc3)+this._0.charAt(enc4)}return output},decode(input){'use strict';var output='';var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;input=input.replace('/[^A-Za-z0-9+/=]/g','');while(i<input.length){enc1=this._0.indexOf(input.charAt(i++));enc2=this._0.indexOf(input.charAt(i++));enc3=this._0.indexOf(input.charAt(i++));enc4=this._0.indexOf(input.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;output=output+String.fromCharCode(chr1);if(enc3!==64){output=output+String.fromCharCode(chr2)}if(enc4!==64){output=output+String.fromCharCode(chr3)}}output=Base64._2(output);return output},_1(string){'use strict';string=string.replace('/\r\n/g','\n');var utftext='';for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c)}else if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128)}else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128)}}return utftext},_2(utftext){'use strict';var string='';var i=0,c1=0,c2=0,c3=0;while(i<utftext.length){c1=utftext.charCodeAt(i);if(c1<128){string+=String.fromCharCode(c1);i++}else if((c1>191)&&(c1<224)){c3=utftext.charCodeAt(i+1);string+=String.fromCharCode(((c1&31)<<6)|(c3&63));i+=2}else{c3=utftext.charCodeAt(i+1);c2=utftext.charCodeAt(i+2);string+=String.fromCharCode(((c1&15)<<12)|((c3&63)<<6)|(c2&63));i+=3}}return string}};function getRandomInt(a,b){'use strict';return Math.floor(Math.random()*(b-a+1))+a}function padStrings(a){'use strict';var b='       ';var e;if(typeof(a)==='object'){e={};for(var d in a){if({}.hasOwnProperty.call(a,d)){e[d]=b+a[d]+b}}}else{e=b+a+b}return e}function handleMouseMove(a,b,e){'use strict';var d=a.getPosition();var h=a.getSprite();var g=null;if(d.x<0){if(d.x>e.screenPosition.x){g=new Animation(b.flyLeft,5,1,30)}else if(d.x<e.screenPosition.x){g=new Animation(b.flyRight,5,1,30)}}else if(d.x>0){if(d.x<e.screenPosition.x){g=new Animation(b.flyRight,5,1,30)}else if(d.x>e.screenPosition.x){g=new Animation(b.flyLeft,5,1,30)}}if(g!==null){h.addAnimation('fly',g);a.playAnimation('fly');a.onAnimationEnd=function(){h.setImageFile(b.ship)}}return a&&a.setPosition(e.screenPosition.x,e.screenPosition.y)}var App=function(){'use strict';var P=false||checkForMobileDevice();var X=false||getBrowserVersion('Trident/([0-9]{1,}[.0-9]{0,})');var l;var J=false;var z=false;var K=null;var t=false;var Y=1;var be=0;var L=4;var Q=4;var G=200;var Z=[400,600,800,1500,5000];var M=2000;var H;var ba=[200,200,200,300,400,400,600,500,400,600];var D=1000;var v;var E=[];var bb;var j=0;var F={data:'overkill'};var R;var s=100;var bc;var w=1;var A=null;var p=false;var k=wade.retrieveLocalObject(F.data);const sissy=(k&&k.sissy)||false;var x=(k&&k.highscore)||0;var f={logo:'../img/logo.png',ship:'../img/ship.png',boom:{0:{file:'../img/animations/explosion/explode_4x4_ship.png',speed:30,x:4,y:4},1:{file:'../img/animations/explosion/explode_4x4_ring.png',speed:30,x:4,y:4},2:{file:'../img/animations/explosion/explode_5x3_enemy.png',speed:30,x:5,y:3}},flyLeft:'../img/animations/ship/fly_left.png',flyRight:'../img/animations/ship/fly_right.png',shipBullet:'../img/bullets/bullet_ship.png',enemyBullets:{0:{file:'../img/bullets/bullet0.png',delay:600,damage:1},1:{file:'../img/bullets/bullet1.png',delay:500,damage:3},2:{file:'../img/bullets/bullet2.png',delay:400,damage:5},3:{file:'../img/bullets/bullet3.png',delay:300,damage:10},4:{file:'../img/bullets/bullet4.png',delay:200,damage:20}},enemies:{0:'../img/enemies/enemy0.png',1:'../img/enemies/enemy1.png',2:'../img/enemies/enemy2.png',3:'../img/enemies/enemy3.png',4:'../img/enemies/enemy4.png'},asteroids:{0:'../img/asteroids/asteroid0.png',1:'../img/asteroids/asteroid1.png',2:'../img/asteroids/asteroid2.png',3:'../img/asteroids/asteroid3.png',4:'../img/asteroids/asteroid4.png',5:'../img/asteroids/asteroid5.png',6:'../img/asteroids/asteroid6.png',7:'../img/asteroids/asteroid7.png',8:'../img/asteroids/asteroid8.png',9:'../img/asteroids/asteroid9.png'},healthIcon:'../img/icons/heart.png',levelIcon:'../img/icons/star.png',scoreIcon:'../img/icons/trophy.png'};var u={shoot:'../sounds/shoot.mp3',hit:'../sounds/hit.mp3',explode:'../sounds/explode.mp3',loop:'../sounds/loop.mp3'};var bf=document.getElementById('toggleRendererTitle');var S=$('#toggleRendererBtn');var T=document.getElementById('toggleMusicTitle');var B=$('#toggleMusicBtn');var U=document.getElementById('game');var bg=document.getElementById('game-icons');wade.preventIframe();wade.setLoadingBar(true,{x:0,y:0},'#333333','#222222');wade.setLoadingImages('../img/loading.svg');this.load=function(){var a=0;wade.loadImage(f.logo);wade.loadImage(f.ship);wade.loadImage(f.shipBullet);for(a=0;a<Object.keys(f.enemyBullets).length;a++){wade.loadImage(f.enemyBullets[a].file)}for(a=0;a<Object.keys(f.boom).length;a++){wade.loadImage(f.boom[a].file)}wade.loadImage(f.flyLeft);wade.loadImage(f.flyRight);wade.loadImage(f.healthIcon);wade.loadImage(f.levelIcon);wade.loadImage(f.scoreIcon);for(a=0;a<Object.keys(f.enemies).length;a++){wade.loadImage(f.enemies[a])}for(a=0;a<Object.keys(f.asteroids).length;a++){wade.loadImage(f.asteroids[a])}var b=wade.isWebAudioSupported()?'loadAudio':'preloadAudio';wade[b](u.shoot);wade[b](u.hit);wade[b](u.explode);wade[b](u.loop)};this.init=function(){k=wade.retrieveLocalObject(F.data);t=(k&&k.force2d)||t;if(t){wade.setLayerRenderMode(Y,'2d');S.removeClass('fa-toggle-on');S.addClass('fa-toggle-off');bf.title='Enable WebGL'}else{wade.setLayerRenderMode(Y,'webgl');S.removeClass('fa-toggle-off');S.addClass('fa-toggle-on');bf.title='Disable WebGL'}if(wade.isWebAudioSupported()){p=(k&&k.music)||p;if(p){B.removeClass('music-off');B.addClass('music-on');T.title='Disable music'}}else{p=false}wade.setMinScreenSize($(window).width(),$(window).height());wade.setMaxScreenSize($(window).width(),$(window).height());wade.setResolutionFactor(1);if(P){wade.setMinScreenSize($(window).width()*3,$(window).height()*3);wade.setMaxScreenSize($(window).width()*3,$(window).height()*3);wade.setResolutionFactor(0.5)}var a=wade.getLayerRenderMode(Y);if(debug){log('\n\t\tbrowser screen size   : '+$(window).width()+'x'+$(window).height()+'\n\t\tactual min screen size: '+wade.getMinScreenWidth()+'x'+wade.getMinScreenHeight()+'\n\t\tactual max screen size: '+wade.getMaxScreenWidth()+'x'+wade.getMaxScreenHeight()+'\n\t\trender-mode           : '+a+'\n\t\tforce2D               : '+t+'\n\t\tisMobile              : '+P+'\n\t\tisSissy               : '+sissy+'\n\t\tcurrent score         : '+j+'\n\t\thighscore             : '+x+'\n\t\tlevel                 : '+w+'\n\t\tplayer health         : '+s+'\n\t\tfire rate             : '+L+'\n\t\tfire damage           : '+G)}var b={insertCoin:'- INSERT COIN -',highscoreIs:'HIGHSCORE IS %i POINTS',youScored:'YOU %s %i POINTS'};if(a==='webgl'){b=padStrings(b)}var e=new TextSprite(b.insertCoin,'36pt Highspeed','white','center');e.setDrawFunction(wade.drawFunctions.blink_(0.5,0.5,e.draw));var d=new SceneObject();d.addSprite(e,{y:320});if(j<=0||x>=j){b.highscoreIs=b.highscoreIs.replace('%i',x);d.addSprite(new TextSprite(b.highscoreIs,'24pt Highspeed','yellow','center'),{y:160})}if(j>0){var h=Base64.decode('U0NPUkVE');if(sissy){h=Base64.decode('Q0hFQVRFRA==')}var g=b.youScored.replace('%s',h);g=g.replace('%i',j);if(a==='webgl'){g=padStrings(g)}d.addSprite(new TextSprite(g,'24pt Highspeed','white','center'),{y:120});if(j>x){var q=Base64.decode('TkVXIEhJR0hTQ09SRQ==');x=j;if(sissy){q+=Base64.decode('IE5PVCBTQVZFRA==')}q+='!';if(a==='webgl'){q=padStrings(q)}var r=new TextSprite(q,'24pt Highspeed','yellow','center');d.addSprite(r,{y:160})}}if(!sissy){k={force2d:t,music:p,highscore:x};wade.storeLocalObject(F.data,k)}d.addSprite(new Sprite(f.logo),{y:-200});K=new SceneObject();var m=new TextSprite('PAUSED','32pt Highspeed','yellow','center');m.setDrawFunction(wade.drawFunctions.blink_(0.5,0.5,m.draw));K.addSprite(new Sprite(f.logo),{y:-200});K.addSprite(m,{y:160});bg.style.display='block';U.style.cursor='default';wade.addSceneObject(d);v=setTimeout(wade.app.spawnAsteroid,D);if(wade.isWebAudioSupported()){if(p&&A===null){A=wade.playAudio(u.loop,true);if(A<0){B.removeClass('music-on');B.addClass('music-off');T.title='Enable music';p=false}}}wade.app.onMouseDown=function(){if(wade.isMouseDown(0)||(wade.isMouseDown()&&(P||X))){bg.style.display='none';U.style.cursor='none';clearTimeout(v);wade.removeSceneObject(d);wade.clearScene();wade.removeUnusedLayers([1]);wade.app.startGame();wade.app.onMouseDown=0}}};this.startGame=function(){var bd=new Sprite(f.ship);var C=wade.getMousePosition();l=new SceneObject(bd,0,C.x,C.y);wade.addSceneObject(l);wade.setMainLoop(function(){Q=L;if(wade.isMouseDown(2)&&sissy){Q=50}var a=be+1/Q;var b=wade.getAppTime();if((wade.isMouseDown(0)||wade.isMouseDown(2)||(wade.isMouseDown()&&(P||X)))&&b>=a){be=b;var e=l.getPosition();var d=l.getSprite().getSize();var h=new Sprite(f.shipBullet);var g=new SceneObject(h,0,e.x,e.y-d.y/2);wade.addSceneObject(g);wade.playAudio(u.shoot,false);E.push(g);g.moveTo(e.x,-500,600);g.onMoveComplete=function(){wade.removeSceneObject(this);wade.removeObjectFromArray(this,E)};if(j>0&&!sissy&&Q<60){j-=10}if(j<0||j==='NaN'){j=0}}if(E.length>0){for(var q=E.length-1;q>=0;q--){var r=E[q].getOverlappingObjects();if(r.length>0){for(var m=0;m<r.length;m++){if(r[m].isEnemy){var V=r[m].getPosition();wade.app.explosion(V,1);wade.playAudio(u.hit,false);if(r[m].health>0){r[m].health-=G}if(r[m].health<=0){wade.app.explosion(V,2);wade.playAudio(u.explode,false);wade.removeSceneObject(r[m]);j+=Math.floor(r[m].initialHealth/10)*w}wade.removeSceneObject(E[q]);wade.removeObjectFromArrayByIndex(q,E);break}}}}}if(Math.floor(j/1000)>w-1&&w<5){w+=1;if(!sissy){s=100}if(M>200){M-=100}if(D>400){D-=100}if(L<50){L+=1}if(G<600){G+=(w*10)}}R.getSprite().setText(s);bc.getSprite().setText(w);bb.getSprite().setText(Math.floor(j))},'fire');wade.setMainLoop(function(){var a=l.getOverlappingObjects(false,'axis-aligned');var b=false;var e=1;if(a.length>0){for(var d=0;d<a.length;d++){if(typeof(a[d])!=='undefined'){if(a[d].isEnemy||a[d].isEnemyBullet){if(typeof(a[d])!=='undefined'&&l.overlapsObject(a[d],'pixel')){if(a[d].health>0){a[d].health-=Math.floor(G/10)}if(typeof(a[d])!=='undefined'&&(a[d].isEnemyBullet||a[d].health<=0)){wade.removeSceneObject(a[d]);wade.removeObjectFromArrayByIndex(d,a)}if(typeof(a[d])!=='undefined'){e=a[d].damage||e}b=true;break}}}}}if(b){b=false;wade.app.explosion(l.getPosition(),0);wade.playAudio(u.hit,false);if(s>0){s-=e}if(s<0||s==='NaN'){s=0}R.getSprite().setText(s)}if(s<=0){var h=wade.app.explosion(l.getPosition(),2);wade.playAudio(u.explode,false);wade.removeSceneObject(l);wade.setMainLoop(null,'fire');wade.setMainLoop(null,'die');if(!sissy&&j>x){k={force2d:t,music:p,highscore:j};wade.storeLocalObject(F.data,k)}var g=setInterval(function(){if(!h.isPlaying()){z=false;clearInterval(g);clearTimeout(H);clearTimeout(v);wade.clearScene();wade.app.init()}},100)}},'die');if(!z){if(sissy){s=999}else{s=100}j=0;w=1;L=4;G=200;z=true}var N=new Sprite(f.scoreIcon);var O=new SceneObject(N,0,wade.getScreenWidth()/2-20,-10-wade.getScreenHeight()/2+30);wade.addSceneObject(O);var W=new TextSprite(j.toString(),'32pt Highspeed','#f88','right');bb=new SceneObject(W,0,wade.getScreenWidth()/2-40,4-wade.getScreenHeight()/2+30);wade.addSceneObject(bb);var y=new Sprite(f.healthIcon);var I=new SceneObject(y,0,-120,-10-wade.getScreenHeight()/2+30);wade.addSceneObject(I);var o=new TextSprite(s.toString(),'32pt Highspeed','#f88','center');R=new SceneObject(o,0,-40,4-wade.getScreenHeight()/2+30);wade.addSceneObject(R);var bh=new Sprite(f.levelIcon);var bi=new SceneObject(bh,0,20-(wade.getScreenWidth()/2),-12-wade.getScreenHeight()/2+30);wade.addSceneObject(bi);var bj=new TextSprite(w,'32pt Highspeed','#f88','left');bc=new SceneObject(bj,0,40-(wade.getScreenWidth()/2),4-wade.getScreenHeight()/2+30);wade.addSceneObject(bc);H=setTimeout(wade.app.spawnEnemy,M);v=setTimeout(wade.app.spawnAsteroid,D)};this.pauseGame=function(){wade.pauseSimulation();clearTimeout(H);clearTimeout(v);wade.app.onMouseMove=null;wade.addSceneObject(K);U.style.cursor='default';return false};$(window).blur(function(){if(z&&!J){console.log('Game paused due to focus loss.');J=true;wade.app.pauseGame()}else{if(!z){console.log('Asteroid timeout cleared due to focus loss.');clearTimeout(v)}}return false});$(window).focus(function(){if(!z){v=setTimeout(wade.app.spawnAsteroid,D)}});this.onKeyDown=function(b){if(z&&b.keyCode===32){J=!J;if(J){wade.app.pauseGame()}else{U.style.cursor='none';H=setTimeout(wade.app.spawnEnemy,M);v=setTimeout(wade.app.spawnAsteroid,D);wade.removeSceneObject(K);wade.resumeSimulation();wade.app.onMouseMove=function(a){if(typeof(l)!=='undefined'){handleMouseMove(l,f,a)}}}}return false};this.onMouseMove=function(a){if(typeof(l)!=='undefined'){return handleMouseMove(l,f,a)}};this.explosion=function(a,b){if(typeof(b)==='undefined'||b===null||typeof(f.boom[b])==='undefined'){b=0}var e=new Animation(f.boom[b].file,f.boom[b].x,f.boom[b].y,f.boom[b].speed);var d=new Sprite();d.setSize(100,100);d.addAnimation('boom',e);var h=new SceneObject(d,0,a.x,a.y);wade.addSceneObject(h);h.playAnimation('boom');h.onAnimationEnd=function(){wade.removeSceneObject(this)};return e};this.getRandomCoords=function(a){return{x1:(Math.random()-0.5)*wade.getScreenWidth(),y1:-wade.getScreenHeight()/2-a.getSize().y/2,x2:(Math.random()-0.5)*wade.getScreenWidth(),y2:Math.abs(wade.getScreenHeight()/2-a.getSize().y/2)}};this.spawnAsteroid=function(){var a;var b=getRandomInt(0,9);a=new Sprite(f.asteroids[b]);var e=wade.app.getRandomCoords(a);var d=new SceneObject(a,0,e.x1,e.y1);wade.addSceneObject(d);d.moveTo(e.x2,e.y2,200);d.isEnemy=true;d.isAsteroid=true;d.health=ba[b];d.initialHealth=ba[b];d.damage=Math.floor(ba[b]/100);d.onMoveComplete=function(){wade.removeSceneObject(this)};v=setTimeout(wade.app.spawnAsteroid,D)};this.spawnEnemy=function(){var N;var O=w-1;var W=Object.keys(f.enemies).length-1;if(O>W){O=W}var y=getRandomInt(0,O);N=new Sprite(f.enemies[y]);var I=wade.app.getRandomCoords(N);var o=new SceneObject(N,0,I.x1,I.y1);wade.addSceneObject(o);o.moveTo(I.x2,I.y2,200);o.isEnemy=true;o.isAsteroid=false;o.health=Z[y];o.initialHealth=Z[y];o.damage=Math.floor(Z[y]/100);o.onMoveComplete=function(){wade.removeSceneObject(this)};o.originalStep=o.step;o.step=function(){this.originalStep();var a=this.getPosition();var b=l.getPosition();var e=Math.atan2(b.y-a.y,b.x-a.x)-3.14/2;this.setRotation(e)};o.fire=function(){var a=this.getSprite().getSize();var b=this.getPosition();var e=l.getPosition();var d=e.x-b.x;var h=e.y-b.y;var g=Math.sqrt(d*d+h*h);d/=g;h/=g;var q=b.x+d*a.x/2;var r=b.y+h*a.y/2;var m=q+d*3000;var V=r+h*3000;var bd=new Sprite(f.enemyBullets[y].file);var C=new SceneObject(bd,0,q,r);C.isEnemyBullet=true;C.damage=f.enemyBullets[y].damage;wade.addSceneObject(C);C.moveTo(m,V,200);C.onMoveComplete=function(){wade.removeSceneObject(this)};this.schedule(f.enemyBullets[y].delay,'fire')};o.schedule(300,'fire');H=setTimeout(wade.app.spawnEnemy,M)};this.toggleRenderer=function(){t=!t;k={force2d:t,music:p,highscore:x};wade.storeLocalObject(F.data,k);clearTimeout(H);clearTimeout(v);wade.setMainLoop(null,'fire');wade.setMainLoop(null,'die');z=false;wade.clearScene();wade.app.init()};this.toggleMusic=function(){if(p){p=false;B.removeClass('music-on');B.addClass('music-off');T.title='Enable music';if(X){k={force2d:t,music:p,highscore:x};wade.storeLocalObject(F.data,k);location.reload()}else{if(A>-1){wade.stopAudio(A)}else{wade.stopAudio()}}}else{if(A>-1){wade.stopAudio(A)}else{wade.stopAudio()}A=wade.playAudio(u.loop,true);p=true;B.removeClass('music-off');B.addClass('music-on');T.title='Disable music'}k={force2d:t,music:p,highscore:x};wade.storeLocalObject(F.data,k);return false}};