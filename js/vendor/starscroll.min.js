!function(t){t.fn.starscroll=function(a,n,e,o,s,h,l,u,d){var c=t(this),p=i.any(),g=new r(c,p,a,n,e,o,s,h,l,u,d);return window.addEventListener("scroll",function(){g.parallax()},!1),u&&!p&&setInterval(function(){g.time+=5,g.parallax()},25),this.el};var r=function(r,i,a,n,e,o,s,h,l,u,d){this.el=r,this.levels=n>10?10:n,this.layers=[],this.dimension=o>20?20:o,this.density=e,this.colour=h||[255,255,255],this.hue=l||!1,this.bit=a||!1,this.time=0,this.anim=u,this.smooth=5,this.scrollspeed=d||2;var c,p,g=t(window).width(),v=t(window).width();c=g>700?700:g,p=v>600?650:v,this.w=c,this.h=p,i||this.init()};r.prototype.init=function(){for(var t=0;t<this.levels;t++)this.layers[t]=this.buildlayers(t);this.images=this.createStars(),this.applyImages(this.images)},r.prototype.buildlayers=function(r){var i={},a=document.createElement("canvas"),n=a.getContext("2d");a.width=this.w,a.height=this.h;var e=t('<div id="starchild'+r+'"/>');return this.buildDOMels(e,r),i.canvas=a,i.context=n,i.DOM=e,i},r.prototype.createStars=function(){for(var t=[],r=0;r<this.levels;r++){for(var i=this.layers[r].canvas,a=this.layers[r].context,n=this.hsl(this.colour),e=0;e<this.density;e++)this.drawStar(a,r,n);t[r]=this.convertCanvasToImage(i)}return t},r.prototype.drawStar=function(t,r,i){var a=this.dimension/(.075*r+1),n=Math.random()*a,e=0,o=0,s=Math.random()*(.9*n),h=this.hue?this.colstep(i):this.colour;e=this.boundary("x",n),o=this.boundary("y",n);var l=t.createRadialGradient(e,o,s,e,o,n),u=.7+.3*Math.random();l.addColorStop(0,"rgba(255,255,255,.9)"),h&&l.addColorStop(.5,"rgba("+h+",.8)"),l.addColorStop(1,"rgba(255,255,255,0)"),t.beginPath(),8==this.bit?(t.fillRect(e,o,n,n),t.fillStyle="rgba(255,255,255,"+u+")"):(t.arc(e,o,n,0,2*Math.PI,!0),t.globalAlpha=.7+.3*Math.random(),t.fillStyle=l),t.fill()},r.prototype.colstep=function(t){return t[0]=t[0]-~~(4*Math.random())+~~(8*Math.random()),this.rgb(t)},r.prototype.boundary=function(t,r){var i=r,a=0;if("x"==t)return a=n=Math.random()*this.w,n<i?a=n+i+Math.random()*r:n>this.w-i&&(a=n-i-Math.random()*r),a;var n=Math.random()*this.h;return a=n,n<i?a=n+i+Math.random()*r:n>this.h-i&&(a=n-i-Math.random()*r),a},r.prototype.applyImages=function(t){for(var r=0;r<this.levels;r++){var i=this.layers[r].DOM,a=t[r].src;i.css({"background-image":"url("+a+")"})}},r.prototype.parallax=function(){for(var t=window.pageYOffset-this.time,r=0;r<this.levels;r++){var i=this.layers[r].DOM,a=-t*((r+1)/this.scrollspeed);i.css({"background-position":"0 "+a+"px"})}},r.prototype.buildDOMels=function(t,r){this.el.append(t);var i="5s";this.anim&&(i="0s"),this.el.css({position:"fixed","z-index":-1,top:0,width:"100%",height:"100%"}),t.css({transition:"all "+i+" cubic-bezier(0.230, 1.000, 0.320, 1.000)",position:"fixed",width:"100%",height:"100%","background-repeat":"repeat","background-color":"transparent"})},r.prototype.convertCanvasToImage=function(t){var r=new Image;return r.src=t.toDataURL("image/png"),r},r.prototype.hsl=function(t){var r=t[0]/255,i=t[1]/255,a=t[2]/255,n=Math.max(r,i,a),e=Math.min(r,i,a),o=(n+e)/2,s=0,h=0;return n!=e&&(s=o<.5?(n-e)/(n+e):(n-e)/(2-n-e),h=r==n?(i-a)/(n-e):i==n?2+(a-r)/(n-e):4+(r-i)/(n-e)),o*=100,s*=100,(h*=60)<0&&(h+=360),[h,s,o]},r.prototype.rgb=function(t){var r,i,a,n,e,o,s=t[0],h=t[1],l=t[2];return h/=100,l/=100,0==h?n=e=o=255*l:(r=2*l-(i=l<=.5?l*(h+1):l+h-l*h),a=s/360,n=this.hue2rgb(r,i,a+1/3),e=this.hue2rgb(r,i,a),o=this.hue2rgb(r,i,a-1/3)),[Math.round(n),Math.round(e),Math.round(o)]},r.prototype.hue2rgb=function(t,r,i){return i<0?i+=1:i>1&&(i-=1),255*(6*i<1?t+(r-t)*i*6:2*i<1?r:3*i<2?t+(r-t)*(2/3-i)*6:t)};var i={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return i.Android()||i.BlackBerry()||i.iOS()||i.Opera()||i.Windows()}}}(jQuery);